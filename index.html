<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>目指せかっこいいサイト</title>
    <script type="text/javascript" src="enchant.js"></script>
    <script type="text/javascript">
	enchant();
	window.onload = function () {
	    var game = new Game(320, 320);
	    var flag = 0;
	    var flag1 = false;
	    var flag2 = false;
	    var flag3 = false;
	    game.preload('kakkowarui.png','kakkoii.png');
	    game.onload = function() {
	        var scene = new Scene();
		scene.backgroundColor = 'green';
 
	        var sprite1 = new Sprite(60, 60);
	        sprite1.image = game.assets['kakkowarui.png'];
		sprite1.x = 0;
		sprite1.y = 0;
	        scene.addChild(sprite1);
	        var sprite2 = new Sprite(60, 60);
	        sprite2.image = game.assets['kakkowarui.png'];
		sprite2.x = 130;
		sprite2.y = 130;
	        scene.addChild(sprite2);
	        var sprite3 = new Sprite(60, 60);
	        sprite3.image = game.assets['kakkowarui.png'];
		sprite3.x = 260;
		sprite3.y = 260;
	        scene.addChild(sprite3);
 
	        sprite1.addEventListener('touchstart', function() {
	            sprite1.image = game.assets['kakkoii.png'];
		    if(flag >= 0 && !flag1 && flag > 0)
		    {
	                sprite1.image = game.assets['kakkoii.png'];
		        flag += 1;
			flag1 = true;
		    }
	        });
	        sprite2.addEventListener('touchstart', function() {
		    if(flag >= 0 && !flag2 && flag > 0)
		    {
	                sprite2.image = game.assets['kakkoii.png'];
		        flag += 1;
			flag2 = true;
		    }
	        });
	        sprite3.addEventListener('touchstart', function() {
		    if(flag >= 0 && !flag3 && flag > 0)
		    {
	                sprite3.image = game.assets['kakkoii.png'];
		        flag += 1;
			flag3 = true;
		    }
	        });

		game.addEventListener('enterframe', function () {
		    sprite1.x+=Math.random() * 10 - 5;
		    if(sprite1.x < 0)
		    {
		    	sprite1.x = 0;
		    }
		    if(sprite1.x > 260)
		    {
		    	sprite1.x = 260;
		    }
		    sprite1.y+=Math.random() * 10 - 5;
		    if(sprite1.y < 0)
		    {
		    	sprite1.y = 0;
		    }
		    if(sprite1.y > 260)
		    {
		    	sprite1.y = 260;
		    }

		    sprite2.x+=Math.random() * 10 - 5;
		    if(sprite2.x < 0)
		    {
		    	sprite2.x = 0;
		    }
		    if(sprite2.x > 260)
		    {
		    	sprite2.x = 260;
		    }
		    sprite2.y+=Math.random() * 10 - 5;
		    if(sprite2.y < 0)
		    {
		    	sprite2.y = 0;
		    }
		    if(sprite2.y > 260)
		    {
		    	sprite2.y = 260;
		    }

		    sprite3.x+=Math.random() * 10 - 5;
		    if(sprite3.x < 0)
		    {
		    	sprite3.x = 0;
		    }
		    if(sprite3.x > 260)
		    {
		    	sprite3.x = 260;
		    }
		    sprite3.y+=Math.random() * 10 - 5;
		    if(sprite3.y < 0)
		    {
		    	sprite3.y = 0;
		    }
		    if(sprite3.y > 260)
		    {
		    	sprite3.y = 260;
		    }

		    if(flag == 3)
		    {
			alert("かっこいい！");
			flag = -1;
		    }
		});
	 
	        game.pushScene(scene);
	    };
	    game.start();
	};
    </script>
    <style type="text/css">
      body { margin: 0; }
    </style>
  </head>
  <body>
  </body>
</html>
